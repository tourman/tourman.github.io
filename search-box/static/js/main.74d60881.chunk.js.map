{"version":3,"sources":["SearchBox/reducer.js","SearchBox/actions.js","SearchBox/connector.js","SearchBox/saga.js","SearchBox/container.js","SearchBox/Wrapper.js","BusyIndicator/BusyIndicator.js","ErrorIndicator/ErrorIndicator.js","SearchInput/Input.js","SearchInput/Reset.js","SearchInput/SearchInput.js","PopupList/List.js","PopupList/Item.js","PopupList/withNavigation.js","PopupList/PopupList.js","SearchBox/SearchBox.js","SearchBox/Composition.js","SearchBox/withRef.js","SearchBox/withClosing.js","SearchBox/withNavigation.js","SearchBox/withFocus.js","api/planets.js","App.js","serviceWorker.js","index.js"],"names":["SEARCH_REQUEST","SEARCH_RESPONSE","SEARCH_ERROR","SEARCH_RESET","SEARCH_CLOSE","SEARCH_SELECT","SEARCH_DOWN","SEARCH_UP","initialState","busy","error","reset","available","input","string","focusCounter","list","items","splitName","name","request","re","RegExp","tokenSets","normal","split","Error","concat","selected","match","tokensByType","Object","entries","map","_ref","_ref2","slicedToArray","type","text","zip","apply","toConsumableArray","flat","filter","splitToken","draft","actionMap","onRequest","types","onResponse","onError","onReset","onClose","onSelect","onUp","onDown","actions","mapValues","payload","arguments","length","undefined","mapStateToProps","state","search","mapDispatchToProps","dispatch","action","searchSaga","api","response","regenerator_default","a","wrap","_context","prev","next","abrupt","delay","call","sent","put","t0","String","stop","_marked","_ref3","_context2","takeLatest","_marked2","reducers","combineReducers","prevState","produce","results","_ref4","item","objectWithoutProperties","objectSpread","find","selectedIndex","findIndex","styles","makeStyles","wrapper","padding","display","position","React","forwardRef","props","ref","classes","react_default","createElement","Box","m","Paper","className","children","busyMap","Map","set","Icon","CircularProgress","iconProps","size","SearchIcon","BusyIndicator","_busyMap$get","get","IconButton","flex","minWidth","overflow","width","justifyContent","visibilityMap","ErrorIndicator","style","Chip","icon","Error_default","label","color","marginLeft","autoFocus","placeholder","InputBase","inputRef","value","onChange","e","target","visibility","onClick","Cancel_default","withNavigation","inputActions","resetActions","Fragment","SearchInput_Input","assign","SearchInput_Reset","top","zIndex","overflowY","maxHeight","paddingRight","List","Container","maxWidth","fontWeight","background","transition","wrapperMap","Wrapper","getProps","areEqual","prevProps","nextProps","shallowEqual","flowRight","Item","memo","useRef","useEffect","current","focus","displayName","token","index","_wrapperMap$get","key","ListItem","button","component","href","preventDefault","ListItemText","PopupList","listActions","itemActions","List_List","PopupList_Item","id","SearchBox_Wrapper","SearchInput_SearchInput","ComposedSearchBox","Search","parentProps","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","saga","es","connect","is","has","contains","onEscape","indexOf","document","addEventListener","removeEventListener","navigationActionsMap","ArrowUp","ArrowDown","onNavigate","activeElement","SearchBox","propTypes","PropTypes","shape","func","isRequired","bool","_search","this","_callee2","getResponse","_getResponse","encodedRequest","url","_args2","asyncToGenerator","mark","_callee","prevResponse","rawResponse","status","statusText","nextResponse","_args","fetch","ok","json","_x","encodeURIComponent","test","count","AppWrapper","CssBaseline","App","Composition","planets","Boolean","window","location","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.74d60881.chunk.js","sourcesContent":["import produce from 'immer';\nimport { zip } from '../helpers';\n\nconst SEARCH_REQUEST = 'SEARCH_REQUEST';\nconst SEARCH_RESPONSE = 'SEARCH_RESPONSE';\nconst SEARCH_ERROR = 'SEARCH_ERROR';\nconst SEARCH_RESET = 'SEARCH_RESET';\nconst SEARCH_CLOSE = 'SEARCH_CLOSE';\nconst SEARCH_SELECT = 'SEARCH_SELECT';\nconst SEARCH_DOWN = 'SEARCH_DOWN';\nconst SEARCH_UP = 'SEARCH_UP';\n\nconst initialState = {\n  busy: false,\n  error: '',\n  reset: {\n    available: false,\n  },\n  input: {\n    string: '',\n    error: false,\n    focusCounter: 0,\n  },\n  list: {\n    available: false,\n    items: [],\n  },\n};\n\nfunction splitName(name, request) {\n  const re = new RegExp(request, 'gi');\n  const tokenSets = {};\n  tokenSets.normal = name.split(re);\n  if (tokenSets.normal === 1) {\n    throw new Error(`No matches for name (${name}) and request (${request})`);\n  }\n  tokenSets.selected = name.match(re);\n  const tokensByType = Object.entries(tokenSets)\n    .map(([ type, tokens ]) => tokens.map(text => ({\n      type,\n      text,\n    })))\n  ;\n  const split = zip(...tokensByType)\n    .flat()\n    .filter(splitToken => splitToken && splitToken.text)\n  ;\n  return split;\n}\n\nfunction reset(draft) {\n  draft.busy = false;\n  draft.reset.available = false;\n  draft.input.string = '';\n  draft.list.available = false;\n}\n\nexport default function search(prevState = initialState, { type, payload }) {\n  const state = produce(prevState, draft => {\n    switch(type) {\n      case SEARCH_REQUEST: {\n        if (payload.request) {\n          draft.busy = true;\n          draft.reset.available = true;\n          draft.input.string = payload.request;\n        } else {\n          reset(draft);\n        }\n        draft.error = '';\n        draft.input.error = false;\n        break;\n      }\n      case SEARCH_RESPONSE: {\n        draft.busy = false;\n        const results = payload.response.results || [];\n        draft.list.available = !!results.length;\n        draft.list.items = results.map(({ name, ...item }) => ({\n          ...item,\n          name,\n          split: splitName(name, draft.input.string),\n        }));\n        break;\n      }\n      case SEARCH_ERROR: {\n        draft.error = payload.error;\n        draft.input.error = true;\n        draft.busy = false;\n        break;\n      }\n      case SEARCH_RESET: {\n        reset(draft);\n        draft.error = '';\n        draft.input.error = false;\n        draft.input.focusCounter++;\n        break;\n      }\n      case SEARCH_CLOSE: {\n        draft.list.available = false;\n        break;\n      }\n      case SEARCH_SELECT: {\n        const item = draft.list.items.find(item => item.name === payload.name);\n        if (!item) break;\n        draft.busy = false;\n        draft.list.available = false;\n        draft.list.items = [item];\n        draft.input.string = payload.name;\n        draft.input.focusCounter++;\n        break;\n      }\n      case SEARCH_DOWN: {\n        const { items } = draft.list;\n        const selectedIndex = items.findIndex(item => item.selected);\n        const last = selectedIndex === items.length - 1;\n        if (last) break;\n        items[selectedIndex + 1].selected = true;\n        if (!~selectedIndex) break;\n        items[selectedIndex    ].selected = false;\n        break;\n      }\n      case SEARCH_UP: {\n        const { items } = draft.list;\n        const selectedIndex = items.findIndex(item => item.selected);\n        if (!~selectedIndex) break;\n        if (!selectedIndex) break;\n        items[selectedIndex - 1].selected = true;\n        items[selectedIndex    ].selected = false;\n        break;\n      }\n      default: {\n        break;\n      }\n    }\n  });\n  return state;\n};\n\nexport {\n  SEARCH_REQUEST,\n  SEARCH_RESPONSE,\n  SEARCH_ERROR,\n  SEARCH_RESET,\n  SEARCH_CLOSE,\n  SEARCH_SELECT,\n  SEARCH_DOWN,\n  SEARCH_UP,\n};\n","import * as types from './reducer';\nimport { mapValues } from '../helpers';\n\nconst actionMap = {\n  onRequest:  types.SEARCH_REQUEST,\n  onResponse: types.SEARCH_RESPONSE,\n  onError:    types.SEARCH_ERROR,\n  onReset:    types.SEARCH_RESET,\n  onClose:    types.SEARCH_CLOSE,\n  onSelect:   types.SEARCH_SELECT,\n  onUp:       types.SEARCH_UP,\n  onDown:     types.SEARCH_DOWN,\n};\n\nconst actions = mapValues(actionMap, type => (payload = {}) => ({\n  type,\n  payload,\n}));\n\nexport default actions;\n","import { connect } from 'react-redux';\nimport { mapValues } from '../helpers';\nimport actions from './actions';\n\nfunction mapStateToProps(state) {\n  return state.search;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: mapValues(actions, action => payload => dispatch(action(payload))),\n  };\n}\n\nexport default function connector(Search) {\n  return connect(\n    mapStateToProps,\n    mapDispatchToProps,\n  )(Search);\n};\n","import { call, put, takeLatest, delay } from 'redux-saga/effects';\n\nimport * as types from './reducer';\nimport actions from './actions';\n\nfunction* request({ api }, { type, payload }) {\n  const { request } = payload;\n  if (!request) return;\n  // Debouncing request\n  yield delay(500);\n  try {\n    const response = yield call(api.search, { request });\n    yield put(actions.onResponse({ response }));\n  } catch(e) {\n    const error = String(e);\n    yield put(actions.onError({ error }));\n  }\n}\n\nexport default function* searchSaga({ api }) {\n  yield takeLatest([\n    types.SEARCH_REQUEST,\n    types.SEARCH_RESET,\n  ], request, { api });\n};\n","import React from 'react';\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { Provider } from 'react-redux';\n\nimport search from './reducer';\nimport saga from './saga';\n\nconst reducers = combineReducers({\n  search,\n});\n\nexport default function container(Search) {\n  return function SearchContainer(parentProps) {\n    const { api, ...props } = parentProps;\n    const sagaMiddleware = createSagaMiddleware();\n    const store = createStore(\n      reducers,\n      applyMiddleware(sagaMiddleware),\n    );\n    sagaMiddleware.run(saga, { api });\n\n    return (\n      <Provider store={store}>\n        <Search {...props} />\n      </Provider>\n    );\n  }\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\n\nconst styles = makeStyles({\n  wrapper: {\n    padding: '4px',\n    display: 'flex',\n    position: 'relative',\n  },\n});\n\nfunction SearchWrapper(props, ref) {\n  const classes = styles();\n  return (\n    <Box m={1}>\n      <Paper ref={ref} className={classes.wrapper}>\n        {props.children}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default React.forwardRef(SearchWrapper);\n","import React from 'react';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SearchIcon from '@material-ui/icons/Search';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst busyMap = new Map()\n  .set(true,  {\n    Icon: CircularProgress,\n    iconProps: {\n      size: 24,\n    },\n  })\n  .set(false, {\n    Icon: SearchIcon,\n    iconProps: {},\n  })\n;\n\nexport default function BusyIndicator(props) {\n  const { Icon, iconProps } = busyMap.get(props.busy);\n  return (\n    <IconButton>\n      <Icon {...iconProps} />\n    </IconButton>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Chip from '@material-ui/core/Chip';\nimport Box from '@material-ui/core/Box';\n\nconst styles = makeStyles({\n  wrapper: {\n    flex: 1,\n    minWidth: 200,\n  },\n  error: {\n    overflow: 'hidden',\n    width: '100%',\n    justifyContent: 'left',\n  },\n});\n\nconst visibilityMap = new Map()\n  .set(true,  'block')\n  .set(false, 'none')\n;\n\nexport default function ErrorIndicator(props) {\n  const { error } = props;\n  const display = visibilityMap.get(!!error);\n  const classes = styles();\n  return (\n    <Box m={1} style={{ display }} className={classes.wrapper}>\n      <Chip\n        icon={<ErrorIcon />}\n        label={error}\n        className={classes.error}\n        color=\"secondary\"\n      />\n    </Box>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputBase from '@material-ui/core/InputBase';\n\nconst styles = makeStyles({\n  input: {\n    marginLeft: '8px',\n    flex: 2,\n  },\n});\n\nfunction Input(props, ref) {\n  const { autoFocus, error, string, placeholder } = props;\n  const classes = styles();\n  return (\n    <InputBase\n      className={classes.input}\n      inputRef={ref}\n      error={error}\n      autoFocus={autoFocus}\n      value={string}\n      placeholder={placeholder}\n      onChange={e => {\n        const { value } = e.target;\n        props.actions.onChange({ value });\n      }}\n    />\n  );\n};\n\nexport default React.forwardRef(Input);\n","import React from 'react';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nconst visibilityMap = new Map()\n  .set(true,  'visible')\n  .set(false, 'hidden')\n;\n\nfunction Reset(props, ref) {\n  const visibility = visibilityMap.get(props.available);\n  return (\n    <IconButton\n      ref={ref}\n      style={{ visibility }}\n      onClick={e => props.actions.onClick(e)}\n    >\n      <CancelIcon />\n    </IconButton>\n  );\n};\n\nexport default React.forwardRef(Reset);\n","import React from 'react';\n\nimport Input from './Input';\nimport Reset from './Reset';\n\nfunction SearchInput(props, ref) {\n  const { reset, input, actions, autoFocus, withNavigation, placeholder } = props;\n  const inputActions = {\n    ...actions,\n    onChange({ value }) {\n      const request = value;\n      props.actions.onRequest({ request });\n    },\n  };\n  const resetActions = {\n    ...actions,\n    onClick() {\n      props.actions.onReset();\n    },\n  };\n  return (\n    <>\n      <Input { ...input } actions={inputActions} withNavigation={withNavigation} placeholder={placeholder} autoFocus={autoFocus} ref={ref} />\n      <Reset { ...reset } actions={resetActions} withNavigation={withNavigation} />\n    </>\n  );\n};\n\nexport default React.forwardRef(SearchInput);\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport MaterialList from '@material-ui/core/List';\n\nconst styles = makeStyles({\n  wrapper: {\n    position: 'absolute',\n    top: 60,\n    zIndex: 1,\n    padding: '0 40px',\n  },\n  list: {\n    overflowY: 'auto',\n    maxHeight: 300,\n    paddingRight: 8\n  },\n});\n\nconst visibilityMap = new Map()\n  .set(true,  'visible')\n  .set(false, 'hidden')\n;\n\nexport default function List(props) {\n  const classes = styles();\n  const visibility = visibilityMap.get(props.available);\n  return (\n    <Container\n      maxWidth=\"md\"\n      className={classes.wrapper}\n      style={{ visibility }}\n    >\n      <Paper>\n        <MaterialList className={classes.list}>\n          {props.children}\n        </MaterialList>\n      </Paper>\n    </Container>\n  );\n};\n","import React from 'react';\nimport { flowRight } from '../helpers';\nimport shallowEqual from 'shallow-equal/objects';\n\nimport withNavigation from './withNavigation';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nconst styles = makeStyles({\n  selected: {\n    fontWeight: 600,\n    background: 'yellow',\n  },\n  item: {\n    transition: 'none',\n  },\n});\n\nconst wrapperMap = new Map()\n  .set('normal', {\n    Wrapper: React.Fragment,\n    getProps: () => ({}),\n  })\n  .set('selected', {\n    Wrapper: 'b',\n    getProps: ({ classes }) => ({\n      className: classes.selected,\n    }),\n  })\n;\n\nfunction Item(props, ref) {\n  const { selected } = props;\n  const classes = styles();\n  const displayName = props.split.map((token, index) => {\n    const { Wrapper, getProps } = wrapperMap.get(token.type);\n    const props = getProps({ classes });\n    return (\n      <Wrapper\n        key={index}\n        {...props}\n      >\n        {token.text}\n      </Wrapper>\n    );\n  });\n  return (\n    <ListItem\n      className={classes.item}\n      button\n      component=\"a\"\n      href={props.name}\n      selected={selected}\n      ref={ref}\n      onClick={e => {\n        e.preventDefault();\n        const { name } = props;\n        props.actions.onClick({ name });\n      }}\n    >\n      <ListItemText>\n        {displayName}\n      </ListItemText>\n    </ListItem>\n  );\n};\n\nfunction areEqual({ actions: a, ...prevProps }, { actions: b, ...nextProps }) {\n  return shallowEqual(prevProps, nextProps);\n}\n\nexport default flowRight([\n  Item => React.memo(Item, areEqual),\n  withNavigation,\n  React.forwardRef,\n])(Item);\n","import React, { useEffect, useRef } from 'react';\n\nexport default function withNavigation(Item) {\n  return function ItemWithNavigation(props) {\n    const { selected } = props;\n    const ref = useRef();\n    useEffect(() => {\n      if (!selected) return;\n      ref.current.focus();\n    }, [ selected ]);\n    return (<Item {...props} ref={ref} />);\n  };\n};\n","import React from 'react';\n\nimport List from './List';\nimport Item from './Item';\n\nexport default function PopupList(props) {\n  const { actions, available, withNavigation } = props;\n  const listActions = {\n    ...actions,\n  };\n  const itemActions = {\n    ...actions,\n    onClick({ name }) {\n      props.actions.onSelect({ name });\n    },\n  };\n  return (\n    <List\n      available={available}\n      actions={listActions}\n    >\n      {props.items.map(item => (\n        <Item\n          {...item}\n          actions={itemActions}\n          key={item.id}\n          withNavigation={withNavigation}\n        />\n      ))}\n    </List>\n  );\n};\n","import React from 'react';\n\nimport Wrapper from './Wrapper';\nimport { BusyIndicator } from '../BusyIndicator';\nimport { ErrorIndicator } from '../ErrorIndicator';\nimport { SearchInput } from '../SearchInput';\nimport { PopupList } from '../PopupList';\n\nfunction Search(props, ref) {\n  const { list, actions, inputRef, placeholder } = props;\n  return (\n    <Wrapper ref={ref}>\n      <BusyIndicator  { ...props } />\n      <SearchInput    { ...props } actions={actions} placeholder={placeholder} ref={inputRef} />\n      <ErrorIndicator { ...props } />\n      <PopupList      { ...list }  actions={actions} />\n    </Wrapper>\n  );\n};\n\nexport default React.forwardRef(Search);\n","import PropTypes from 'prop-types';\nimport { flowRight } from '../helpers';\n\nimport withRef from './withRef';\nimport withClosing from './withClosing';\nimport withNavigation from './withNavigation';\nimport withFocus from './withFocus';\nimport connector from './connector';\nimport container from './container';\n\nimport SearchBox from './SearchBox';\n\nconst ComposedSearchBox = flowRight([\n  container,\n  connector,\n  withRef,\n  withClosing,\n  withNavigation,\n  withFocus,\n])(SearchBox);\n\nComposedSearchBox.propTypes = {\n  api: PropTypes.shape({\n    search: PropTypes.func.isRequired,\n  }).isRequired,\n  autoFocus: PropTypes.bool,\n};\n\nexport default ComposedSearchBox;\n","import React, { useRef } from 'react';\n\nexport default function withRef(Search) {\n  return function SearchWithRef(props) {\n    const ref = useRef();\n    return (<Search {...props} ref={ref} />);\n  };\n};\n","import React, { useEffect } from 'react';\n\nexport default function withClosing(Search) {\n  function SearchWithClosing(props, ref) {\n    const { onClose } = props.actions;\n\n    function onClick(e) {\n      const is = ref.current === e.target;\n      const has = ref.current.contains(e.target);\n      if (is || has) return;\n      onClose();\n    }\n    function onEscape(e) {\n      const esc = ['Esc', 'Escape'].indexOf(e.key);\n      if (!~esc) return;\n      onClose();\n    }\n\n    useEffect(() => {\n      document.addEventListener('keyup', onEscape);\n      document.addEventListener('click', onClick);\n      return () => {\n        document.removeEventListener('keyup', onEscape);\n        document.removeEventListener('click', onClick);\n      };\n    });\n\n    return (<Search {...props} ref={ref} />);\n  }\n\n  return React.forwardRef(SearchWithClosing);\n};\n","import React, { useEffect } from 'react';\n\nexport default function withNavigation(Search) {\n  const navigationActionsMap = {\n    'ArrowUp':   'onUp',\n    'ArrowDown': 'onDown',\n  };\n\n  function SearchWithNavigation(props, ref) {\n    // Functions\n    function onNavigate(e) {\n      const is = ref.current === document.activeElement;\n      const has = ref.current.contains(document.activeElement);\n      const isFocused = is || has;\n      if (!isFocused) return;\n      const action = navigationActionsMap[e.key];\n      if (!action) return;\n      props.actions[action]();\n      e.preventDefault();\n    }\n\n    // Hooks\n    useEffect(() => {\n      document.addEventListener('keydown', onNavigate);\n      return () => {\n        document.removeEventListener('keydown', onNavigate);\n      };\n    });\n\n    return (<Search {...props} ref={ref} />);\n  }\n\n  return React.forwardRef(SearchWithNavigation);\n};\n","import React, { useRef, useEffect } from 'react';\n\nexport default function withFocus(Search) {\n  function SearchWithFocus(props, ref) {\n    const inputRef = useRef();\n    useEffect(() => {\n      inputRef.current.focus();\n    }, [ props.input.focusCounter ])\n    return (<Search {...props} inputRef={inputRef} ref={ref} />);\n  }\n\n  return React.forwardRef(SearchWithFocus);\n};\n","export async function search({ request } = {}) {\n  async function getResponse(url, prevResponse = { results: [] }) {\n    if (!url) {\n      return prevResponse;\n    }\n    const rawResponse = await fetch(url);\n    if (!rawResponse.ok) {\n      let { status, statusText } = rawResponse;\n      statusText = statusText && `: (${statusText})`;\n      throw new Error(`${status}${statusText}`);\n    }\n    const response = await rawResponse.json();\n    const nextResponse = {\n      ...response,\n      results: [\n        ...prevResponse.results,\n        ...response.results,\n      ],\n    };\n    return await getResponse(response.next, nextResponse);\n  }\n\n  const encodedRequest = encodeURIComponent(request);\n  const url = `https://swapi.co/api/planets/?search=${encodedRequest}`;\n  const response = await getResponse(url);\n  const re = new RegExp(request, 'i');\n  response.results = response.results\n    .map(item => ({\n      ...item,\n      id: item.name,\n    }))\n    .filter(item => re.test(item.name))\n  ;\n  response.count = response.results.length;\n  return response;\n};\n","import React from 'react';\n\nimport Box from '@material-ui/core/Box';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { SearchBox } from './SearchBox';\nimport { planets } from './api';\n\nfunction AppWrapper(props) {\n  return (\n    <Box m={2}>\n      <Container component=\"main\" maxWidth=\"md\">\n        <CssBaseline />\n        {props.children}\n      </Container>\n    </Box>\n  );\n}\n\nfunction App() {\n  return (\n    <AppWrapper>\n      <SearchBox api={planets} autoFocus={true} placeholder=\"Try to search planets...\" />\n    </AppWrapper>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}